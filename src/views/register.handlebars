<div class="registration-form">
    <form action="/sessions/register" method="post" enctype="application/x-www-form-urlencoded">
        <div class="form-group">
            <label for="_f_name">First name:</label>
            <input type="text" name="firstName" id="_f_name" />
        </div>

        <div class="form-group">
            <label for="_l_name">Last name:</label>
            <input type="text" name="lastName" id="_l_name" />
        </div>

        <div class="form-group">
            <label for="_age">Age:</label>
            <input type="number" name="age" id="_age" />
        </div>

        <div class="form-group">
            <label for="_email">Email:</label>
            <input type="email" name="email" id="_email" />
        </div>

        <div class="form-group">
            <label for="_pass">Password:</label>
            <input type="password" name="password" id="_pass" />
        </div>

        <button type="submit" class="register-button">Register</button>
    </form>
    <div id="message"></div>
</div>

<script>
    document.getElementById('registrationForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        const formData = new FormData(event.target);
        const data = {};
        formData.forEach((value, key) => { data[key] = value });

        const response = await fetch('/sessions/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        const result = await response.json();
        const messageDiv = document.getElementById('message');

        if (response.status === 201) {
            messageDiv.innerText = result.message;
            setTimeout(() => {
                window.location.href = result.redirectUrl;
            }, 2000); 
        } else {
            messageDiv.innerText = result.error;
        }
    });
</script>